{"version":3,"sources":["scripts/main.js"],"names":["prevTitle","prevRow","pageBody","document","querySelector","table","tableBody","tBodies","tableHead","tHead","tableBodyRows","rows","ourOffices","pushNotification","type","errorBox","createElement","h2","p","classList","add","dataset","qa","style","userSelect","top","right","prepend","append","innerText","setTimeout","remove","sortRows","index","sortType","sort","x","y","first","children","textContent","replace","second","isNaN","localeCompare","forEach","addEventListener","ev","columnIndex","target","cellIndex","title","contains","toggle","undefined","removeAttribute","row","parentElement","form","method","insertAdjacentHTML","preventDefault","data","Object","fromEntries","FormData","entries","name","length","age","salaryNum","salary","position","office","toLocaleString","reset","cell","oldValue","trim","cellInput","firstElementChild","focus","e","inputValue","get","key","includes","valueToNum"],"mappings":"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","file":"main.e5560136.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// write code here\nconst pageBody = document.querySelector('body');\nconst table = document.querySelector('table');\nconst tableBody = table.tBodies[0];\nconst tableHead = table.tHead;\nconst tableBodyRows = tableBody.rows;\nconst ourOffices = [\n  'Tokyo',\n  'Singapore',\n  'London',\n  'New York',\n  'Edinburgh',\n  'San Francisco',\n];\n\nfunction pushNotification(type) {\n  const errorBox = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  errorBox.classList.add(`notification`);\n  errorBox.classList.add(`${type}`);\n  errorBox.dataset.qa = 'notification';\n  errorBox.style.userSelect = 'none';\n\n  errorBox.style.top = `10px`;\n  errorBox.style.right = `10px`;\n\n  h2.classList.add('title');\n  errorBox.prepend(h2);\n\n  errorBox.append(p);\n\n  switch (type) {\n    case 'error':\n      h2.innerText = 'Error';\n      p.innerText = 'Input values should be correct!';\n      break;\n\n    case 'success':\n      h2.innerText = 'Success';\n      p.innerText = 'New employee was added to the table';\n      break;\n\n    case 'warning':\n      h2.innerText = 'Warning';\n      p.innerText = 'Input value is not correct!';\n      break;\n  }\n\n  pageBody.append(errorBox);\n\n  setTimeout(() => {\n    errorBox.remove();\n  }, 4000);\n};\n\nfunction sortRows(rows, index, sortType) {\n  const sorted = rows.sort((x, y) => {\n    const first = x.children[index].textContent.replace(/[^a-zA-Z0-9 ]/g, '');\n    const second = y.children[index].textContent.replace(/[^a-zA-Z0-9 ]/g, '');\n\n    if (isNaN(+first)) {\n      if (sortType === 'ASC') {\n        return first.localeCompare(second);\n      } else if (sortType === 'DESC') {\n        return second.localeCompare(first);\n      }\n    } else {\n      if (sortType === 'ASC') {\n        return first - second;\n      } else if (sortType === 'DESC') {\n        return second - first;\n      }\n    }\n  });\n\n  sorted.forEach(x => tableBody.append(x));\n}\n\nlet prevTitle;\n\ntableHead.addEventListener('click', (ev) => {\n  const columnIndex = ev.target.cellIndex;\n  const title = ev.target;\n\n  if (prevTitle === title) {\n    if (prevTitle.classList.contains('ASC')) {\n      title.classList.toggle('ASC');\n      title.classList.toggle('DESC');\n\n      sortRows([...tableBodyRows], columnIndex, 'DESC');\n    } else if (prevTitle.classList.contains('DESC')) {\n      title.classList.toggle('DESC');\n      title.classList.toggle('ASC');\n\n      sortRows([...tableBodyRows], columnIndex, 'ASC');\n    }\n  } else {\n    if (prevTitle !== undefined) {\n      prevTitle.removeAttribute('class');\n    }\n\n    title.classList.add('ASC');\n    sortRows([...tableBodyRows], columnIndex, 'ASC');\n  }\n\n  prevTitle = title;\n});\n\nlet prevRow;\n\ntableBody.addEventListener('click', (ev) => {\n  const row = ev.target.parentElement;\n\n  if (prevRow === undefined || prevRow === row) {\n    row.classList.toggle('active');\n    prevRow = row;\n  } else {\n    row.classList.toggle('active');\n    prevRow.classList.remove('active');\n\n    prevRow = row;\n  }\n});\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\nform.method = 'get';\n\nform.insertAdjacentHTML('afterbegin', `\n  <label>Name:\n    <input\n      name=\"name\"\n      type=\"text\"\n      placeholder=\"Name\"\n      data-qa=\"name\"\n      required\n    >\n  </label>\n\n  <label>Position:\n    <input\n      name=\"position\"\n      type=\"text\"\n      placeholder=\"Position\"\n      data-qa=\"position\"\n      required\n    >\n  </label>\n\n  <label>Office:\n    <select\n      name=\"office\"\n      data-qa=\"office\"\n      required>\n      <option value=\"\" disabled selected>\n        Choose your office\n      </option>\n\n      <option value=\"Tokyo\">\n        Tokyo\n      </option>\n\n      <option value=\"Singapore\">\n        Singapore\n      </option>\n\n      <option value=\"London\">\n        London\n      </option>\n\n      <option value=\"New York\">\n        New York\n      </option>\n\n      <option value=\"Edinburgh\">\n        Edinburgh\n      </option>\n\n      <option value=\"San Francisco\">\n        San Francisco\n      </option>\n    </select>\n  </label>\n\n  <label>Age:\n    <input\n      name=\"age\"\n      type=\"number\"\n      placeholder=\"Age\"\n      data-qa=\"age\"\n      required\n    >\n  </label>\n\n  <label>Salary:\n    <input\n      name=\"salary\"\n      type=\"number\"\n      min=\"0\"\n      placeholder=\"Salary in dollars\"\n      data-qa=\"salary\"\n      required\n    >\n  </label>\n\n  <button type=\"submit\">\n    Save to table\n  </button>\n`);\npageBody.append(form);\n\nform.addEventListener('submit', (ev) => {\n  ev.preventDefault();\n\n  const data = Object.fromEntries(new FormData(form).entries());\n\n  if (data.name.length > 3 && data.age > 18 && data.age < 90) {\n    const salaryNum = +data.salary;\n\n    tableBody.insertAdjacentHTML('beforeend', `\n    <tr>\n      <td>${data.name}</td>\n      <td>${data.position}</td>\n      <td>${data.office}</td>\n      <td>${data.age}</td>\n      <td>$${salaryNum.toLocaleString('en-US')}</td>\n    </tr>\n    `);\n    pushNotification('success');\n\n    form.reset();\n  } else {\n    pushNotification('error');\n  }\n});\n\ntableBody.addEventListener('dblclick', (ev) => {\n  const cell = ev.target;\n  const oldValue = cell.innerText.trim();\n\n  cell.innerText = '';\n\n  cell.insertAdjacentHTML('afterbegin', `\n      <form method=\"POST\">\n        <label>\n          <input\n          class=\"cell-input\"\n          name=\"newValue\"\n          type=\"text\">\n        </label>\n      </form>\n    `);\n\n  const cellInput = cell.firstElementChild;\n\n  cellInput.firstElementChild.firstElementChild.focus();\n\n  cellInput.addEventListener('keydown', (e) => {\n    const data = new FormData(cellInput);\n    const inputValue = data.get('newValue');\n\n    if (e.key === 'Enter') {\n      if (inputValue.length === 0) {\n        cell.textContent = oldValue;\n\n        pushNotification('warning');\n\n        return;\n      }\n\n      if (cell.cellIndex === 0 && inputValue.length < 4) {\n        cell.textContent = oldValue;\n\n        pushNotification('warning');\n\n        return;\n      }\n\n      if (cell.cellIndex === 2 && !ourOffices.includes(inputValue)) {\n        cell.textContent = oldValue;\n\n        pushNotification('warning');\n\n        return;\n      }\n\n      if (cell.cellIndex === 3\n        && (isNaN(+inputValue) || +inputValue < 18 || +inputValue > 90)) {\n        cell.textContent = oldValue;\n\n        pushNotification('warning');\n\n        return;\n      }\n\n      if (cell.cellIndex === 4 && isNaN(+inputValue)) {\n        cell.textContent = oldValue;\n\n        pushNotification('warning');\n\n        return;\n      } else if (cell.cellIndex === 4) {\n        const valueToNum = +inputValue;\n\n        cell.textContent = `$${valueToNum.toLocaleString('en-US')}`;\n\n        return;\n      }\n\n      cell.textContent = inputValue;\n    }\n  });\n\n  cellInput.addEventListener('focusout', (e) => {\n    const data = new FormData(cellInput);\n    const inputValue = data.get('newValue');\n\n    if (inputValue.length === 0) {\n      cell.textContent = oldValue;\n\n      pushNotification('warning');\n\n      return;\n    }\n\n    if (cell.cellIndex === 0 && inputValue.length < 4) {\n      cell.textContent = oldValue;\n\n      pushNotification('warning');\n\n      return;\n    }\n\n    if (cell.cellIndex === 2 && !ourOffices.includes(inputValue)) {\n      cell.textContent = oldValue;\n\n      pushNotification('warning');\n\n      return;\n    }\n\n    if (cell.cellIndex === 3\n      && (isNaN(+inputValue) || +inputValue < 18 || +inputValue > 90)) {\n      cell.textContent = oldValue;\n\n      pushNotification('warning');\n\n      return;\n    }\n\n    if (cell.cellIndex === 4 && isNaN(+inputValue)) {\n      cell.textContent = oldValue;\n\n      pushNotification('warning');\n\n      return;\n    } else if (cell.cellIndex === 4) {\n      const valueToNum = +inputValue;\n\n      cell.textContent = `$${valueToNum.toLocaleString('en-US')}`;\n\n      return;\n    }\n\n    cell.textContent = inputValue;\n  });\n});\n"]}